<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Dependency Injection | Vinternship</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Dependency Injection" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="1. Problem Statement Making a Healthcare Appointment System Modular and Testable; Growing Clinic’s Scheduling Headaches" />
<meta property="og:description" content="1. Problem Statement Making a Healthcare Appointment System Modular and Testable; Growing Clinic’s Scheduling Headaches" />
<link rel="canonical" href="http://localhost:4001/vinternship/case-studies/10-dependency-injection/" />
<meta property="og:url" content="http://localhost:4001/vinternship/case-studies/10-dependency-injection/" />
<meta property="og:site_name" content="Vinternship" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2026-01-30T19:11:54+05:30" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Dependency Injection" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2026-01-30T19:11:54+05:30","datePublished":"2026-01-30T19:11:54+05:30","description":"1. Problem Statement Making a Healthcare Appointment System Modular and Testable; Growing Clinic’s Scheduling Headaches","headline":"Dependency Injection","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4001/vinternship/case-studies/10-dependency-injection/"},"url":"http://localhost:4001/vinternship/case-studies/10-dependency-injection/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/vinternship/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4001/vinternship/feed.xml" title="Vinternship" /></head>
<head><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-87W6B0JP70"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-87W6B0JP70');
</script></head>
  <body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/vinternship/">Vinternship</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/vinternship/intro/">Introduction</a><a class="page-link" href="/vinternship/case-studies/">Case Studies</a><a class="page-link" href="/vinternship/projects/">Projects</a><div class="dropdown">
                <input type="checkbox" id="dropdown-trigger-activity" class="dropdown-trigger" />
                <label for="dropdown-trigger-activity" class="dropbtn">Activity</label>
                <div class="dropdown-content"><a href="/vinternship/linkedin_post/">LinkedIn Post</a><a href="/vinternship/blogs/">Blogs</a><a href="/vinternship/vlogs/">Vlogs</a><a href="/vinternship/endorsements/">Endorsements</a></div>
              </div><div class="dropdown">
                <input type="checkbox" id="dropdown-trigger-resources" class="dropdown-trigger" />
                <label for="dropdown-trigger-resources" class="dropbtn">Resources</label>
                <div class="dropdown-content"><a href="/vinternship/faq/">FAQ</a><a href="/vinternship/vibe/">ViBe</a><a href="/vinternship/hp/">Health Points</a><a href="/vinternship/git-guide/">GitHub Guide</a><a href="/vinternship/protocols_and_policies/">Protocols and Policies</a></div>
              </div></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  
  
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      

  
  
    <nav style="display:flex; justify-content:space-between; align-items:center; gap:1rem; padding:1rem 0;">
      <div style="flex:1; text-align:left;">
        
          
          
          <a href="/vinternship/case-studies/09-repository-pattern/" style="text-decoration:none; font-size:1.1em;">
            ←
          </a>
        
      </div>
      <div style="flex:1; text-align:right;">
        
        
      </div>
    </nav>
  

  <header class="post-header">
    <h1 class="post-title">Dependency Injection</h1>
    <p class="post-description">Learn about Dependency Injection and Inversion of Control in Express</p>
  </header>

  <div class="post-content">
    <h2 id="1-problem-statement">1. Problem Statement</h2>
<p>Making a Healthcare Appointment System Modular and Testable; Growing Clinic’s Scheduling Headaches</p>

<p>Sunrise Family Clinic started with a single doctor and a handwritten appointment book.<br />
Now, with multiple doctors, online booking, reminders, and insurance checks:</p>

<ul>
  <li>
    <p>The code for scheduling, notifications, and billing is tangled together.</p>
  </li>
  <li>
    <p>Every time a new feature (like SMS reminders) is added, it’s hard to test or swap out without breaking existing code.</p>
  </li>
  <li>
    <p>When the clinic wants to try a new SMS provider or add email reminders, developers must rewrite large parts of the system.</p>
  </li>
  <li>
    <p>Testing is risky, since real notifications go out during every test run.</p>
  </li>
</ul>

<p><img src="https://i.postimg.cc/CMXTgJDH/Express-2.png" width="300px" /></p>

<p><strong>The challenge:</strong><br />
How can you design your appointment system so each part (scheduling, notifications, billing) can be developed, tested, and swapped out independently-without breaking the rest of the system?</p>

<hr />

<h2 id="2-learning-objectives">2. Learning Objectives</h2>

<p>By the end of this tutorial, you will:</p>

<ul>
  <li>
    <p>Understand Dependency Injection (DI) and Inversion of Control (IoC) concepts.</p>
  </li>
  <li>
    <p>Use a DI container (TypeDI) to manage dependencies in a Node.js/Express app.</p>
  </li>
  <li>
    <p>Write modular, testable code by injecting services (e.g., notification, billing) instead of hardcoding them.</p>
  </li>
  <li>
    <p>Swap implementations (e.g., SMS vs. email) without changing business logic.</p>
  </li>
  <li>
    <p>Write unit tests with mock dependencies.</p>
  </li>
</ul>

<hr />

<h2 id="3-concept-introduction-with-analogy">3. Concept Introduction with Analogy</h2>

<h2 id="analogy-the-clinics-reception-desk-and-service-providers"><strong>Analogy: The Clinic’s Reception Desk and Service Providers</strong></h2>

<p>Imagine the clinic’s receptionist:</p>

<ul>
  <li>
    <p>Needs to schedule appointments, send reminders, and process payments.</p>
  </li>
  <li>
    <p>Instead of calling each service directly, the receptionist uses a  <strong>service directory</strong>  (like a switchboard or concierge).</p>
  </li>
  <li>
    <p>When the clinic changes SMS providers, the receptionist just updates the directory, not their entire workflow.</p>
  </li>
</ul>

<p><strong>Dependency Injection is like this service directory:</strong></p>

<ul>
  <li>
    <p>Each part of your system asks for the service it needs, not caring who provides it.</p>
  </li>
  <li>
    <p>You can swap services (real or mock) easily, for new features or testing.</p>
  </li>
</ul>

<hr />

<h2 id="4-technical-deep-dive">4. Technical Deep Dive</h2>

<h2 id="a-what-is-dependency-injection-di"><strong>A. What Is Dependency Injection (DI)?</strong></h2>

<p><strong>Dependency Injection</strong>  is a programming technique where an object receives the objects (dependencies) it needs from an external source, rather than creating them itself</p>

<ul>
  <li>
    <p><strong>Inversion of Control (IoC):</strong>  Instead of your class controlling how dependencies are created, an external system (the IoC container) takes over that responsibility.</p>
  </li>
  <li>
    <p><strong>Why?</strong></p>

    <ul>
      <li>
        <p>Makes code loosely coupled: your classes depend on  <em>interfaces</em>  (contracts), not concrete implementations.</p>
      </li>
      <li>
        <p>Enables easy swapping of implementations (e.g., switch from SMS to Email notifications, or from a fake billing service to a real one).</p>
      </li>
      <li>
        <p>Supports different configurations for different environments (e.g., test, development, production).</p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Benefits:</strong></p>

<ul>
  <li>
    <p>Decouples components (e.g., scheduling doesn’t care how notifications are sent).</p>
  </li>
  <li>
    <p>Makes code easier to test (inject mocks).</p>
  </li>
  <li>Enables swapping implementations with minimal code changes.
    <h2 id="b-types-of-dependency-injection"><strong>B. Types of Dependency Injection</strong></h2>
  </li>
  <li>
    <p><strong>Constructor Injection (most common and recommended):</strong><br />
Dependencies are passed as parameters to the class constructor.</p>

    <ul>
      <li>
        <p><strong>Advantages:</strong></p>

        <ul>
          <li>
            <p>Makes dependencies explicit (you know what’s required).</p>
          </li>
          <li>
            <p>Enforces required dependencies at creation time (no runtime surprises).</p>
          </li>
          <li>
            <p>Simplifies mocking for testing (just pass a mock in the constructor).</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Setter Injection:</strong><br />
Dependencies are set via setter methods after object creation.</p>
  </li>
  <li><strong>Property Injection:</strong><br />
Dependencies are set directly on public properties (less common in TypeScript/Node).</li>
</ul>

<p><strong>Constructor injection is preferred</strong>  for clarity, safety, and testability.</p>
<h2 id="c-how-does-an-ioc-container-work"><strong>C. How Does an IoC Container Work?</strong></h2>

<p>An  <strong>IoC container</strong>  (like TypeDI) manages the creation, configuration, and lifecycle of your services and their dependencies.</p>

<ul>
  <li>
    <p><strong>Registration:</strong>  You register classes (services) with the container, often with decorators like  <code class="language-plaintext highlighter-rouge">@Service()</code>.</p>
  </li>
  <li>
    <p><strong>Resolution:</strong>  When you ask for a service, the container:</p>

    <ol>
      <li>
        <p>Reads the constructor to see what dependencies are needed.</p>
      </li>
      <li>
        <p>Finds or creates those dependencies (recursively).</p>
      </li>
      <li>
        <p>Injects them into your class.</p>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>Lifecycle Management:</strong></p>

    <ul>
      <li>
        <p>Singleton: One instance for the whole app (default in TypeDI).</p>
      </li>
      <li>
        <p>Transient: New instance every time.</p>
      </li>
      <li>
        <p>Scoped: Instance per request/context.</p>
        <h2 id="d-advanced-usage-with-typedi"><strong>D. Advanced Usage with TypeDI</strong></h2>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Service Tokens:</strong><br />
Instead of using classes directly, you can use tokens (symbols or strings) for even looser coupling.</p>
  </li>
  <li>
    <p><strong>Factory Functions:</strong><br />
Register services using factories for dynamic creation or configuration.</p>
  </li>
  <li>
    <p><strong>Scoped Containers:</strong><br />
Create per-request or per-user containers for request-specific dependencies (e.g., user context, transactions).</p>
  </li>
  <li>
    <p><strong>Service Groups:</strong><br />
Inject arrays of services (e.g., multiple notification handlers).</p>
  </li>
  <li>
    <p><strong>Resetting and Cleaning Up:</strong><br />
Use  <code class="language-plaintext highlighter-rouge">Container.reset()</code>  to clear registrations between tests or for hot-reloading.</p>
  </li>
</ul>

<h2 id="e-why-diioc-is-essential-for-scalable-systems"><strong>E. Why DI/IoC is Essential for Scalable Systems</strong></h2>

<ul>
  <li>
    <p>As your system grows, manual wiring of dependencies becomes error-prone and unmanageable.</p>
  </li>
  <li>
    <p>DI containers automate this, making your codebase modular, testable, and adaptable to change</p>
  </li>
</ul>

<h2 id="f-using-typedi-for-di-in-nodejsexpress"><strong>F. Using TypeDI for DI in Node.js/Express</strong></h2>

<p><strong>1. Install Prerequisites</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> npm <span class="nb">install </span>typedi reflect-metadata
</code></pre></div></div>

<p>In your <code class="language-plaintext highlighter-rouge">tsconfig.json</code>:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"experimentalDecorators"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="err">,</span><span class="w">
</span><span class="nl">"emitDecoratorMetadata"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></code></pre></div></div>

<p>At the top of your entry file:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">"</span><span class="s2">reflect-metadata</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>2. Define Service Interfaces and Implementations</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// notifications/NotificationService.ts</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// notifications/SMSService.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Service</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Service</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">SMSService</span> <span class="k">implements</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="k">async</span> <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`SMS sent to </span><span class="p">${</span><span class="nx">to</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// notifications/EmailService.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Service</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Service</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">EmailService</span> <span class="k">implements</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="k">async</span> <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Email sent to </span><span class="p">${</span><span class="nx">to</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>3. Inject Dependencies</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// appointments/AppointmentService.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Service</span><span class="p">,</span> <span class="nx">Inject</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../notifications/NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Service</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">AppointmentService</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span>
    <span class="p">@</span><span class="nd">Inject</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">SMSService</span><span class="p">)</span> <span class="k">private</span> <span class="nx">notifier</span><span class="p">:</span> <span class="nx">NotificationService</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="k">async</span> <span class="nf">bookAppointment</span><span class="p">(</span><span class="nx">patient</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">time</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...scheduling logic...</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">notifier</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">patient</span><span class="p">,</span> <span class="s2">`Your appointment is booked for </span><span class="p">${</span><span class="nx">time</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">confirmed</span><span class="dl">"</span> <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p><strong>4. Swap Implementations Easily</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// main.ts</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">reflect-metadata</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppointmentService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./appointments/AppointmentService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">EmailService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./notifications/EmailService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./notifications/NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Use EmailService instead of SMSService</span>
<span class="nx">Container</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">NotificationService</span><span class="p">,</span> <span class="k">new</span> <span class="nc">EmailService</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">appointmentService</span> <span class="o">=</span> <span class="nx">Container</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">AppointmentService</span><span class="p">);</span>
<span class="nx">appointmentService</span><span class="p">.</span><span class="nf">bookAppointment</span><span class="p">(</span><span class="dl">"</span><span class="s2">alice@example.com</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Monday 10am</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li>No change to  <code class="language-plaintext highlighter-rouge">AppointmentService</code>  code is needed!</li>
</ul>

<p><strong>5. Test with Mocks</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// tests/AppointmentService.test.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppointmentService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../appointments/AppointmentService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../notifications/NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MockNotifier</span> <span class="k">implements</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="nl">messages</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">async</span> <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">to</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nf">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">should send notification on booking</span><span class="dl">"</span><span class="p">,</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">mock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MockNotifier</span><span class="p">();</span>
  <span class="nx">Container</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">NotificationService</span><span class="p">,</span> <span class="nx">mock</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">Container</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">AppointmentService</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">service</span><span class="p">.</span><span class="nf">bookAppointment</span><span class="p">(</span><span class="dl">"</span><span class="s2">bob@example.com</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Tuesday 2pm</span><span class="dl">"</span><span class="p">);</span>

  <span class="nf">expect</span><span class="p">(</span><span class="nx">mock</span><span class="p">.</span><span class="nx">messages</span><span class="p">).</span><span class="nf">toContain</span><span class="p">(</span><span class="dl">"</span><span class="s2">bob@example.com: Your appointment is booked for Tuesday 2pm</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="5-step-by-step-data-modeling--code-walkthrough">5. Step-by-Step Data Modeling &amp; Code Walkthrough</h2>

<p><strong>A. Setting Up for Flexibility and Growth</strong></p>

<p><strong>Clinic Scenario:</strong><br />
The clinic knows it will need to add new notification types (SMS, Email, automated calls) and billing providers (Stripe, insurance, etc.) as it grows. They want to avoid rewriting appointment logic every time.</p>

<p><strong>How DI/TypeDI Solves This:</strong><br />
By setting up TypeDI and using interfaces, the clinic can register any notification or billing provider and swap implementations with a single line of code.</p>

<p><strong>Implementation:</strong></p>

<ol>
  <li>Install TypeDI and reflect-metadata:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>typedi reflect-metadata
</code></pre></div>    </div>
  </li>
  <li>Add at the top of your main file:
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">"</span><span class="s2">reflect-metadata</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Enable decorators in <code class="language-plaintext highlighter-rouge">tsconfig.json</code>:
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="dl">"</span><span class="s2">experimentalDecorators</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="dl">"</span><span class="s2">emitDecoratorMetadata</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>B. Defining Interfaces: Contracts for Clinic Services</strong></p>

<p><strong>Clinic Scenario:</strong><br />
The clinic wants to ensure that all notification and billing services follow a standard contract, so they can add new providers or test with mocks easily.</p>

<p><strong>How DI/TypeDI Solves This:</strong><br />
By defining interfaces, the appointment logic doesn’t care how a notification is sent or a bill is processed—only that it happens.</p>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// notifications/NotificationService.ts</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// billing/BillingService.ts</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">BillingService</span> <span class="p">{</span>
  <span class="nf">charge</span><span class="p">(</span><span class="nx">patient</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p><strong>C. Creating Injectable Implementations: Real-World Providers</strong></p>

<p><strong>Clinic Scenario:</strong><br />
The clinic starts with SMS for reminders, but wants to add Email later, and maybe swap in a mock for testing.</p>

<p><strong>How DI/TypeDI Solves This:</strong><br />
Each provider is a class marked with  <code class="language-plaintext highlighter-rouge">@Service()</code>, making it injectable and swappable.</p>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// notifications/SMSService.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Service</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Service</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">SMSService</span> <span class="k">implements</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="k">async</span> <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`SMS sent to </span><span class="p">${</span><span class="nx">to</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// billing/StripeBillingService.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Service</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BillingService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./BillingService</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Service</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">StripeBillingService</span> <span class="k">implements</span> <span class="nx">BillingService</span> <span class="p">{</span>
  <span class="k">async</span> <span class="nf">charge</span><span class="p">(</span><span class="nx">patient</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Charged $</span><span class="p">${</span><span class="nx">amount</span><span class="p">}</span><span class="s2"> to </span><span class="p">${</span><span class="nx">patient</span><span class="p">}</span><span class="s2"> via Stripe`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>If the clinic wants to add Email or insurance billing, they just add new classes.</li>
</ul>

<p><strong>D. Injecting Services into Appointment Logic</strong></p>

<p><strong>Clinic Scenario:</strong><br />
The appointment scheduler shouldn’t care how reminders are sent or how billing is processed—it should just ask for those services.</p>

<p><strong>How DI/TypeDI Solves This:</strong><br />
The  <code class="language-plaintext highlighter-rouge">AppointmentService</code>  receives its dependencies via constructor injection, making it easy to swap them for different environments or tests.</p>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// appointments/AppointmentService.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Service</span><span class="p">,</span> <span class="nx">Inject</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../notifications/NotificationService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BillingService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../billing/BillingService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">SMSService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../notifications/SMSService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">StripeBillingService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../billing/StripeBillingService</span><span class="dl">"</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Service</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">AppointmentService</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span>
    <span class="p">@</span><span class="nd">Inject</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">SMSService</span><span class="p">)</span> <span class="k">private</span> <span class="nx">notifier</span><span class="p">:</span> <span class="nx">NotificationService</span><span class="p">,</span>
    <span class="p">@</span><span class="nd">Inject</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">StripeBillingService</span><span class="p">)</span> <span class="k">private</span> <span class="nx">billing</span><span class="p">:</span> <span class="nx">BillingService</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="k">async</span> <span class="nf">bookAppointment</span><span class="p">(</span><span class="nx">patient</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">time</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">billing</span><span class="p">.</span><span class="nf">charge</span><span class="p">(</span><span class="nx">patient</span><span class="p">,</span> <span class="nx">amount</span><span class="p">);</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">notifier</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">patient</span><span class="p">,</span> <span class="s2">`Your appointment is booked for </span><span class="p">${</span><span class="nx">time</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">confirmed</span><span class="dl">"</span> <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>If the clinic wants to use Email instead of SMS, or a different billing provider, they only change what’s injected, not the business logic.</li>
</ul>

<p><strong>E. Swapping Implementations for Growth or Testing</strong></p>

<p><strong>Clinic Scenario:</strong><br />
The clinic wants to use Email reminders for some patients, or a mock billing service for testing, without touching appointment logic.</p>

<p><strong>How DI/TypeDI Solves This:</strong><br />
You can register any implementation with the container at runtime.</p>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Container</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">typedi</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppointmentService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./appointments/AppointmentService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">EmailService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./notifications/EmailService</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NotificationService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./notifications/NotificationService</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Swap to EmailService for notifications</span>
<span class="nx">Container</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">NotificationService</span><span class="p">,</span> <span class="k">new</span> <span class="nc">EmailService</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">appointmentService</span> <span class="o">=</span> <span class="nx">Container</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">AppointmentService</span><span class="p">);</span>
<span class="nx">appointmentService</span><span class="p">.</span><span class="nf">bookAppointment</span><span class="p">(</span><span class="dl">"</span><span class="s2">alice@example.com</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Monday 10am</span><span class="dl">"</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
</code></pre></div></div>
<ul>
  <li>For tests, you can inject a mock service that just logs messages.</li>
</ul>

<p><strong>F. Testing with Mocks: Safe, Isolated, and Reliable</strong></p>

<p><strong>Clinic Scenario:</strong><br />
The clinic wants to test appointment booking without sending real notifications or charging real credit cards.</p>

<p><strong>How DI/TypeDI Solves This:</strong><br />
Inject a mock service that records calls instead of performing real actions.</p>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MockNotifier</span> <span class="k">implements</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="nl">messages</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">async</span> <span class="nf">send</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">to</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">MockBilling</span> <span class="k">implements</span> <span class="nx">BillingService</span> <span class="p">{</span>
  <span class="nl">charges</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">async</span> <span class="nf">charge</span><span class="p">(</span><span class="nx">patient</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">charges</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">patient</span><span class="p">}</span><span class="s2">: $</span><span class="p">${</span><span class="nx">amount</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// In your test setup</span>
<span class="nx">Container</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">NotificationService</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MockNotifier</span><span class="p">());</span>
<span class="nx">Container</span><span class="p">.</span><span class="nf">set</span><span class="p">(</span><span class="nx">BillingService</span><span class="p">,</span> <span class="k">new</span> <span class="nc">MockBilling</span><span class="p">());</span>

<span class="kd">const</span> <span class="nx">service</span> <span class="o">=</span> <span class="nx">Container</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="nx">AppointmentService</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">service</span><span class="p">.</span><span class="nf">bookAppointment</span><span class="p">(</span><span class="dl">"</span><span class="s2">bob@example.com</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Tuesday 2pm</span><span class="dl">"</span><span class="p">,</span> <span class="mi">75</span><span class="p">);</span>

<span class="c1">// Assert that the mocks recorded the expected actions</span>

<span class="nx">Container</span><span class="p">.</span><span class="nf">reset</span><span class="p">();</span> <span class="c1">// Clean up after test</span>
</code></pre></div></div>
<ul>
  <li>No real SMS or billing happens during tests—just logs in memory.</li>
</ul>

<h2 id="6-challenge">6. Challenge</h2>

<p><strong>Your Turn!</strong></p>

<ul>
  <li>
    <p>Add a  <code class="language-plaintext highlighter-rouge">BillingService</code>  interface and a  <code class="language-plaintext highlighter-rouge">StripeBillingService</code>  implementation.</p>
  </li>
  <li>
    <p>Inject  <code class="language-plaintext highlighter-rouge">BillingService</code>  into  <code class="language-plaintext highlighter-rouge">AppointmentService</code>  to charge patients when booking.</p>
  </li>
  <li>
    <p>Write a test using a mock billing service to verify the charge is made.</p>
  </li>
</ul>

<h2 id="7--common-pitfalls--best-practices">7.  Common Pitfalls &amp; Best Practices</h2>

<table>
  <thead>
    <tr>
      <th><strong>Pitfall</strong></th>
      <th><strong>Best Practice</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Hardcoding dependencies in services</td>
      <td>Always inject dependencies via constructor</td>
    </tr>
    <tr>
      <td>Not using interfaces for services</td>
      <td>Depend on abstractions, not implementations</td>
    </tr>
    <tr>
      <td>Forgetting to reset the container in tests</td>
      <td>Clean up after each test to avoid side effects</td>
    </tr>
    <tr>
      <td>Over-injecting (too many dependencies)</td>
      <td>Keep service responsibilities focused</td>
    </tr>
  </tbody>
</table>

<h2 id="8-optional-programmers-workflow-checklist">8. Optional: Programmer’s Workflow Checklist</h2>

<ul>
  <li>
    <p>Define interfaces for all service dependencies.</p>
  </li>
  <li>
    <p>Use  <code class="language-plaintext highlighter-rouge">@Service()</code>  and  <code class="language-plaintext highlighter-rouge">@Inject()</code>  decorators for DI.</p>
  </li>
  <li>
    <p>Register implementations in the DI container.</p>
  </li>
  <li>
    <p>Swap implementations for testing or new features.</p>
  </li>
  <li>
    <p>Write tests using mock services.</p>
  </li>
  <li>
    <p>Reset the container between tests to avoid leaks</p>
  </li>
</ul>


  </div>

  <hr/>

  
  
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      
      

  
  
    <nav style="display:flex; justify-content:space-between; align-items:center; gap:1rem; padding:1rem 0;">
      <div style="flex:1; text-align:left;">
        
          
          
          <a href="/vinternship/case-studies/09-repository-pattern/" style="text-decoration:none; font-size:1.1em;">
            ←
          </a>
        
      </div>
      <div style="flex:1; text-align:right;">
        
        
      </div>
    </nav>
  
</article>

      </div>
    </main>

	<!-- The following code is commented out to remove the footer information in the default page.-->	
	<!--<footer class="site-footer h-card">
  <data class="u-url" href="/vinternship/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Vinternship</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Vinternship</li><li><a class="u-email" href="mailto:sudarshan@iitrpr.ac.in">sudarshan@iitrpr.ac.in</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/sudarshansudarshan"><svg class="svg-icon"><use xlink:href="/vinternship/assets/minima-social-icons.svg#github"></use></svg> <span class="username">sudarshansudarshan</span></a></li><li><a href="https://www.twitter.com/sudarshaniisc"><svg class="svg-icon"><use xlink:href="/vinternship/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">sudarshaniisc</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Vinternship - A comprehensive full-stack development internship program covering the MERN stack and modern web technologies. Master TypeScript, React, Express.js, and MongoDB through hands-on case studies.</p>
      </div>
    </div>

  </div>

</footer>
-->

  </body>

</html>


<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
